import"./assets/styles-JE8YjOlG.js";import{a as _,i as T}from"./assets/vendor-Cbhu4xvy.js";const W="https://dummyjson.com",d={CATEGORIES:"/products/category-list",ALL_PRODUCTS:"/products?limit=12&skip=",CATEGORY_PRODUCTS:"/products/category/",ONE_PRODUCT:"/products/",QUERY_PRODUCT:"/products/search?q=",PER_PAGE:"limit=12&skip="},f={WISH_KEY:"wishlist",CART_KEY:"cart"},m=12;_.defaults.baseURL=W;async function Y(){const{data:t}=await _(`${d.CATEGORIES}`);return t}async function w(t){const{data:e}=await _(`${d.ALL_PRODUCTS}${(t-1)*m}`);return e}async function k(t,e){const{data:c}=await _(`${d.CATEGORY_PRODUCTS}${t}?${d.PER_PAGE}${(e-1)*m}`);return console.log(`${d.CATEGORY_PRODUCTS}${t}?${d.PER_PAGE}${(e-1)*m}`),c}async function F(t){const{data:e}=await _(`${d.ONE_PRODUCT}${t}`);return e}async function B(t,e){const{data:c}=await _(`${d.QUERY_PRODUCT}${t}&${d.PER_PAGE}${(e-1)*m}`);return c}const o={categoriesList:document.querySelector("ul.categories"),productList:document.querySelector("ul.products"),loadMoreBtn:document.querySelector(".load-more-btn"),modal:document.querySelector(".modal"),modalBackdrop:document.querySelector(".js-modal-backdrop"),modalProduct:document.querySelector(".modal-product"),modalClose:document.querySelector(".modal__close-btn"),formSearch:document.querySelector(".search-form"),notFoundDiv:document.querySelector(".not-found"),clearBtn:document.querySelector(".search-form__btn-clear"),cartBtn:document.querySelector(".modal-product__btn--cart"),wishBtn:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector("[data-cart-count]"),wishCount:document.querySelector("[data-wishlist-count]")};function G(t){const e=t.map(c=>`<li class="categories__item">
   <button class="categories__btn" type="button">${c}</button>
 </li>
`).join("");o.categoriesList.innerHTML=e}function L(t){const e=t.map(({id:c,thumbnail:n,title:l,brand:s,category:g,price:i,description:P})=>`<li class="products__item" data-id="${c}">
    <img class="products__image" src="${n}" alt="${P}"/>
    <p class="products__title">${l}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${s}</span></p>
    <p class="products__category">Category: ${g}</p>
    <p class="products__price">Price: ${i}$</p>
 </li>`).join("");o.productList.insertAdjacentHTML("beforeend",e)}function K({id:t,thumbnail:e,title:c,shippingInformation:n,price:l,description:s,tags:g,returnPolicy:i}){const P=`<img class="modal-product__img" src="${e}" alt="${c}" />
      <div class="modal-product__content" data-id="${t}">
        <p class="modal-product__title">${c}</p>
        <ul class="modal-product__tags">${g.map(U=>`<li>${U}</li>`).join("")}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${i}</p>
        <p class="modal-product__price">Price: ${l}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;o.modalProduct.innerHTML=P}const v={timeout:5e3,theme:"dark",messageColor:"white",iconColor:"#FFFFFF",closeOnClick:!0,backgroundColor:"#ef4040",position:"topCenter"};function H(){const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")}function y(t){console.log(t),v.message=t.message,T.show(v)}function $(){o.productList.innerHTML=""}function C(t,e){if(t<e)j(),o.loadMoreBtn.removeEventListener("click",S),o.loadMoreBtn.addEventListener("click",S);else throw o.loadMoreBtn.removeEventListener("click",S),A(),O(),new Error("No more products to load")}function j(){o.loadMoreBtn.classList.remove("is-hidden"),O()}function A(){o.loadMoreBtn.classList.add("is-hidden")}function Q(){o.notFoundDiv.classList.add("not-found--visible"),A()}function O(){o.notFoundDiv.classList.remove("not-found--visible")}function h(t,e){localStorage.setItem(t,JSON.stringify(e))}function b(t){const e=localStorage.getItem(t);return e?JSON.parse(e):[]}const r={id:null,categoryName:"",cartList:[],wishList:[],getId(){const t=document.querySelector(".modal-product__content");t&&(this.id=t.dataset.id)},getCartList(){this.cartList=b(f.CART_KEY)},getWishList(){this.wishList=b(f.WISH_KEY)}};function z(){o.modal.classList.add("modal--is-open"),o.modalClose.addEventListener("click",E),o.modalBackdrop.addEventListener("click",q),document.addEventListener("keydown",N),J(),V(),Z(),X()}function E(){o.modal.classList.remove("modal--is-open"),o.modalClose.removeEventListener("click",E),o.modalBackdrop.removeEventListener("click",q),document.removeEventListener("keydown",N)}function q(t){t.target===t.currentTarget&&E()}function N(t){t.code==="Escape"&&E()}function J(){document.querySelector(".modal-product__buy-btn").addEventListener("click",()=>{T.success({title:"Success",message:"Оформлення замовлення"})})}function V(){r.getId(),r.getCartList();const{cartList:t,id:e}=r;t.includes(e)?o.cartBtn.textContent="Remove from cart":o.cartBtn.textContent="Add to cart"}function Z(){r.getId(),r.getWishList();const{wishList:t,id:e}=r;t.includes(e)?o.wishBtn.textContent="Remove from Wishlist":o.wishBtn.textContent="Add to Wishlist"}function X(){r.getId(),r.getCartList(),r.getWishList();const{id:t,cartList:e,wishList:c}=r,n=window.location.pathname.includes("/wishlist"),l=window.location.pathname.includes("/cart");o.cartBtn.addEventListener("click",s=>{if(!e.includes(t))e.push(t),h(f.CART_KEY,e),s.target.textContent="Remove from cart";else{const g=e.indexOf(t);if(e.splice(g,1),h(f.CART_KEY,e),s.target.textContent="Add to cart",l){const i=document.querySelector(`.products__item[data-id="${t}"]`);i&&i.remove()}}M()}),o.wishBtn.addEventListener("click",s=>{if(!c.includes(t))c.push(t),h(f.WISH_KEY,c),s.target.textContent="Remove from Wishlist";else{const g=e.indexOf(t);if(c.splice(g,1),h(f.WISH_KEY,c),s.target.textContent="Add to Wishlist",n){const i=document.querySelector(`.products__item[data-id="${t}"]`);i&&i.remove()}}x()})}function M(){r.getCartList(),o.cartCount.textContent=r.cartList.length}function x(){r.getWishList(),o.wishCount.textContent=r.wishList.length}let a=1,u,p=0,R,tt=o.formSearch.querySelector(".search-form__input");async function et(){try{const t=await Y();G(["All",...t]),H()}catch{y({message:"Try again later!"})}}async function D(){try{$();const t=await w(a),{products:e}=t;L(e),o.productList.addEventListener("click",n=>{n.target.nodeName!=="UL"&&I(n)});const c=t.total;p=Math.ceil(c/m),C(a,p)}catch(t){y(t)}}async function S(){console.log(r.categoryName),a+=1;let t;try{u&&(t=await B(u,a)),r.categoryName==="All"||r.categoryName===""?t=await w(a):t=await k(r.categoryName,a),console.log(t);const{products:e}=t;L(e);const c=t.total;p=Math.ceil(c/m),C(a,p)}catch(e){y(e)}}function ot(){let t;o.categoriesList.addEventListener("click",async e=>{if(a=1,e.target.nodeName==="BUTTON"){r.categoryName=e.target.textContent,console.log(r.categoryName);try{$(),r.categoryName==="All"||r.categoryName===""?t=await w(a):t=await k(r.categoryName,a),console.log(t);const{products:c}=t;console.log(c),console.log(a),Array.isArray(c)&&c.length===0&&o.notFoundDiv.classList.add("not-found--visible"),L(c),o.productList.addEventListener("click",l=>{l.target.nodeName!=="UL"&&I(l)});const n=t.total;p=Math.ceil(n/m),C(a,p)}catch(c){y(c)}}})}async function I(t){try{if(!t.target.closest(".products__item"))return;const e=t.target.closest(".products__item").dataset.id,c=await F(`${e}`);K(c),z()}catch(e){y(e)}}function ct(){o.formSearch.addEventListener("submit",async t=>{t.preventDefault(),u=t.target.searchValue.value.trim();try{if(!u)throw o.formSearch.reset(),new Error("Sorry, this name images is empty. Please try again!");u!==R&&(a=1,R=u),$();const e=await B(u,a),c=e.total;p=Math.ceil(c/m),c===0?Q():(L(e.products),C(a,p))}catch(e){y(e)}})}function rt(){o.clearBtn.addEventListener("click",t=>{t.preventDefault(),tt.value="",u="",D()})}et();D();ct();rt();M();x();ot();o.formSearch.reset();
//# sourceMappingURL=index.js.map
