{"version":3,"file":"modal-BTTa0Kjh.js","sources":["../../src/js/refs.js","../../src/js/storage.js","../../src/js/constants.js","../../src/js/modal.js"],"sourcesContent":["export const refs = {\n  categoriesList: document.querySelector('ul.categories'),\n  productList: document.querySelector('ul.products'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  modal: document.querySelector('.modal'),\n  modalBackdrop: document.querySelector('.js-modal-backdrop'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalClose: document.querySelector('.modal__close-btn'),\n  formSearch: document.querySelector('.search-form'),\n  notFoundDiv: document.querySelector('.not-found'),\n  clearBtn: document.querySelector('.search-form__btn-clear'),\n  cartBtn: document.querySelector('.modal-product__btn--cart'),\n  wishBtn: document.querySelector('.modal-product__btn--wishlist'),\n  cartCount: document.querySelector('[data-cart-count]'),\n  wishCount: document.querySelector('[data-wishlist-count]'),\n};\n","// функції для роботи з localStorage.\n\nexport function setLocalStorage(key, data) {\n  localStorage.setItem(key, JSON.stringify(data));\n}\n\nexport function getLocalStorage(key) {\n  const data = localStorage.getItem(key);\n  //   if (data) {\n  return data ? JSON.parse(data) : [];\n  //   }\n}\nexport function setSessionStorage(key, data) {\n  sessionStorage.setItem(key, JSON.stringify(data));\n}\n\nexport function getSessionStorage(key) {\n  const data = sessionStorage.getItem(key);\n  if (data) {\n    return data ? JSON.parse(data) : null;\n  }\n}\n","export const BASE_URL = 'https://dummyjson.com';\n\nexport const ENDPOINTS = {\n  CATEGORIES: '/products/category-list',\n  ALL_PRODUCTS: '/products?limit=12&skip=',\n  CATEGORY_PRODUCTS: '/products/category/',\n  ONE_PRODUCT: '/products/',\n  QUERY_PRODUCT: '/products/search?q=',\n  PER_PAGE: 'limit=12&skip=',\n};\n\nexport const KEY = {\n  WISH_KEY: 'wishlist',\n  CART_KEY: 'cart',\n\n  // USER_VALUE_SESSION_STORAGE_KEY: 'user-value-key',\n};\n\nexport const PAGE_SIZE = 12;\n","// функції модального вікна (відкриття, закриття і так далі).\n\n// зберігай функції модального вікна (відкриття, закриття і так далі).\n// Додавання товарів у кошик.\n// Додавання товарів у Wishlist.\nimport iziToast from 'izitoast';\nimport { refs } from './refs';\nimport { getLocalStorage, setLocalStorage } from './storage';\nimport { KEY } from './constants';\n\nexport const product = {\n  id: null,\n  categoryName: '',\n  cartList: [],\n  wishList: [],\n\n  getId() {\n    const modalProductContent = document.querySelector(\n      '.modal-product__content'\n    );\n    if (!modalProductContent) return;\n    this.id = modalProductContent.dataset.id;\n  },\n\n  getCartList() {\n    this.cartList = getLocalStorage(KEY.CART_KEY);\n  },\n\n  getWishList() {\n    this.wishList = getLocalStorage(KEY.WISH_KEY);\n  },\n};\n\nexport function openModal() {\n  refs.modal.classList.add('modal--is-open');\n\n  refs.modalClose.addEventListener('click', closeModal);\n  refs.modalBackdrop.addEventListener('click', closeBackdrop);\n  document.addEventListener('keydown', closeEscape);\n\n  buyProduct();\n  updateCart();\n  updateWishList();\n\n  selectProduct();\n}\n\nfunction closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n\n  refs.modalClose.removeEventListener('click', closeModal);\n  refs.modalBackdrop.removeEventListener('click', closeBackdrop);\n\n  document.removeEventListener('keydown', closeEscape);\n}\n\nexport function closeBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    closeModal();\n  }\n}\n\nexport function closeEscape(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction buyProduct() {\n  const buyBtn = document.querySelector('.modal-product__buy-btn');\n\n  buyBtn.addEventListener('click', () => {\n    iziToast.success({ title: 'Success', message: 'Оформлення замовлення' });\n  });\n}\n\nfunction updateCart() {\n  product.getId();\n  product.getCartList();\n\n  const { cartList, id } = product;\n\n  if (!cartList.includes(id)) {\n    refs.cartBtn.textContent = 'Add to cart';\n  } else {\n    refs.cartBtn.textContent = 'Remove from cart';\n  }\n}\nfunction updateWishList() {\n  product.getId();\n  product.getWishList();\n\n  const { wishList, id } = product;\n\n  if (!wishList.includes(id)) {\n    refs.wishBtn.textContent = 'Add to Wishlist';\n  } else {\n    refs.wishBtn.textContent = 'Remove from Wishlist';\n  }\n}\n\nfunction selectProduct() {\n  product.getId();\n  product.getCartList();\n  product.getWishList();\n\n  const { id, cartList, wishList } = product;\n\n  const isWishlistPage = window.location.pathname.includes('/wishlist');\n  const isCartlistPage = window.location.pathname.includes('/cart');\n\n  refs.cartBtn.addEventListener('click', event => {\n    if (!cartList.includes(id)) {\n      cartList.push(id);\n      setLocalStorage(KEY.CART_KEY, cartList);\n      event.target.textContent = 'Remove from cart';\n    } else {\n      const productIndex = cartList.indexOf(id);\n      cartList.splice(productIndex, 1);\n      setLocalStorage(KEY.CART_KEY, cartList);\n      event.target.textContent = 'Add to cart';\n\n      if (isCartlistPage) {\n        const productCard = document.querySelector(\n          `.products__item[data-id=\"${id}\"]`\n        );\n        if (productCard) {\n          productCard.remove();\n        }\n      }\n    }\n    updateCartCount();\n  });\n\n  refs.wishBtn.addEventListener('click', event => {\n    if (!wishList.includes(id)) {\n      wishList.push(id);\n      setLocalStorage(KEY.WISH_KEY, wishList);\n      event.target.textContent = 'Remove from Wishlist';\n    } else {\n      const productIndex = cartList.indexOf(id);\n      wishList.splice(productIndex, 1);\n      setLocalStorage(KEY.WISH_KEY, wishList);\n      event.target.textContent = 'Add to Wishlist';\n\n      if (isWishlistPage) {\n        const productCard = document.querySelector(\n          `.products__item[data-id=\"${id}\"]`\n        );\n        if (productCard) {\n          productCard.remove();\n        }\n      }\n    }\n    updateWishCount();\n  });\n}\n\nexport function updateCartCount() {\n  product.getCartList();\n  refs.cartCount.textContent = product.cartList.length;\n}\n\nexport function updateWishCount() {\n  product.getWishList();\n  refs.wishCount.textContent = product.wishList.length;\n}\n"],"names":["refs","setLocalStorage","key","data","getLocalStorage","BASE_URL","ENDPOINTS","KEY","PAGE_SIZE","product","modalProductContent","openModal","closeModal","closeBackdrop","closeEscape","buyProduct","updateCart","updateWishList","selectProduct","event","iziToast","cartList","id","wishList","isWishlistPage","isCartlistPage","productIndex","productCard","updateCartCount","updateWishCount"],"mappings":"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"}