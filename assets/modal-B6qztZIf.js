import{i as g}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const s={categoriesList:document.querySelector("ul.categories"),productList:document.querySelector("ul.products"),loadMoreBtn:document.querySelector(".load-more-btn"),modal:document.querySelector(".modal"),modalBackdrop:document.querySelector(".js-modal-backdrop"),modalProduct:document.querySelector(".modal-product"),modalClose:document.querySelector(".modal__close-btn"),formSearch:document.querySelector(".search-form"),notFoundDiv:document.querySelector(".not-found"),clearBtn:document.querySelector(".search-form__btn-clear"),cartBtn:document.querySelector(".modal-product__btn--cart"),wishBtn:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector("[data-cart-count]"),wishCount:document.querySelector("[data-wishlist-count]")};function l(t,e){localStorage.setItem(t,JSON.stringify(e))}function f(t){const e=localStorage.getItem(t);return e?JSON.parse(e):[]}const q="https://dummyjson.com",v={CATEGORIES:"/products/category-list",ALL_PRODUCTS:"/products?limit=12&skip=",CATEGORY_PRODUCTS:"/products/category/",ONE_PRODUCT:"/products/",QUERY_PRODUCT:"/products/search?q=",PER_PAGE:"limit=12&skip="},d={WISH_KEY:"wishlist",CART_KEY:"cart"},P=12,c={id:null,categoryName:"",cartList:[],wishList:[],getId(){const t=document.querySelector(".modal-product__content");t&&(this.id=t.dataset.id)},getCartList(){this.cartList=f(d.CART_KEY)},getWishList(){this.wishList=f(d.WISH_KEY)}};function B(){s.modal.classList.add("modal--is-open"),s.modalClose.addEventListener("click",m),s.modalBackdrop.addEventListener("click",p),document.addEventListener("keydown",h),L(),y(),C(),S()}function m(){s.modal.classList.remove("modal--is-open"),s.modalClose.removeEventListener("click",m),s.modalBackdrop.removeEventListener("click",p),document.removeEventListener("keydown",h)}function p(t){t.target===t.currentTarget&&m()}function h(t){t.code==="Escape"&&m()}function L(){document.querySelector(".modal-product__buy-btn").addEventListener("click",()=>{g.success({title:"Success",message:"Оформлення замовлення"})})}function y(){c.getId(),c.getCartList();const{cartList:t,id:e}=c;t.includes(e)?s.cartBtn.textContent="Remove from cart":s.cartBtn.textContent="Add to cart"}function C(){c.getId(),c.getWishList();const{wishList:t,id:e}=c;t.includes(e)?s.wishBtn.textContent="Remove from Wishlist":s.wishBtn.textContent="Add to Wishlist"}function S(){c.getId(),c.getCartList(),c.getWishList();const{id:t,cartList:e,wishList:n}=c,u=window.location.pathname.includes("/wishlist"),o=window.location.pathname.includes("/cart");s.cartBtn.addEventListener("click",r=>{if(!e.includes(t))e.push(t),l(d.CART_KEY,e),r.target.textContent="Remove from cart";else{const i=e.indexOf(t);if(e.splice(i,1),l(d.CART_KEY,e),r.target.textContent="Add to cart",o){const a=document.querySelector(`.products__item[data-id="${t}"]`);a&&a.remove()}}E()}),s.wishBtn.addEventListener("click",r=>{if(!n.includes(t))n.push(t),l(d.WISH_KEY,n),r.target.textContent="Remove from Wishlist";else{const i=e.indexOf(t);if(n.splice(i,1),l(d.WISH_KEY,n),r.target.textContent="Add to Wishlist",u){const a=document.querySelector(`.products__item[data-id="${t}"]`);a&&a.remove()}}_()})}function E(){c.getCartList(),s.cartCount.textContent=c.cartList.length}function _(){c.getWishList(),s.wishCount.textContent=c.wishList.length}export{q as B,v as E,P,_ as a,B as o,c as p,s as r,E as u};
//# sourceMappingURL=modal-B6qztZIf.js.map
