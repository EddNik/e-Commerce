import{a as g,i as O}from"./vendor-4yCzdkXl.js";import{B as R,E as s,P as d,r as e,p as c,o as S}from"./modal-BTTa0Kjh.js";g.defaults.baseURL=R;async function k(){const{data:t}=await g(`${s.CATEGORIES}`);return t}async function L(t){const{data:o}=await g(`${s.ALL_PRODUCTS}${(t-1)*d}`);return o}async function v(t,o){const{data:a}=await g(`${s.CATEGORY_PRODUCTS}${t}?${s.PER_PAGE}${(o-1)*d}`);return console.log(`${s.CATEGORY_PRODUCTS}${t}?${s.PER_PAGE}${(o-1)*d}`),a}async function B(t){const{data:o}=await g(`${s.ONE_PRODUCT}${t}`);return o}async function M(t,o){const{data:a}=await g(`${s.QUERY_PRODUCT}${t}&${s.PER_PAGE}${(o-1)*d}`);return a}function D(t){const o=t.map(a=>`<li class="categories__item">
   <button class="categories__btn" type="button">${a}</button>
 </li>
`).join("");e.categoriesList.innerHTML=o}function m(t){const o=t.map(({id:a,thumbnail:n,title:p,brand:_,category:y,price:P,description:$})=>`<li class="products__item" data-id="${a}">
    <img class="products__image" src="${n}" alt="${$}"/>
    <p class="products__title">${p}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${_}</span></p>
    <p class="products__category">Category: ${y}</p>
    <p class="products__price">Price: ${P}$</p>
 </li>`).join("");e.productList.insertAdjacentHTML("beforeend",o)}function F({id:t,thumbnail:o,title:a,shippingInformation:n,price:p,description:_,tags:y,returnPolicy:P}){const $=`<img class="modal-product__img" src="${o}" alt="${a}" />
      <div class="modal-product__content" data-id="${t}">
        <p class="modal-product__title">${a}</p>
        <ul class="modal-product__tags">${y.map(A=>`<li>${A}</li>`).join("")}</ul>
        <p class="modal-product__description">${_}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${P}</p>
        <p class="modal-product__price">Price: ${p}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;e.modalProduct.innerHTML=$}const b={timeout:5e3,theme:"dark",messageColor:"white",iconColor:"#FFFFFF",closeOnClick:!0,backgroundColor:"#ef4040",position:"topCenter"};function U(){const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")}function u(t){console.log(t),b.message=t.message,O.show(b)}function E(){e.productList.innerHTML=""}function f(t,o){if(t<o)G(),e.loadMoreBtn.removeEventListener("click",h),e.loadMoreBtn.addEventListener("click",h);else throw e.loadMoreBtn.removeEventListener("click",h),N(),T(),new Error("No more products to load")}function G(){e.loadMoreBtn.classList.remove("is-hidden"),T()}function N(){e.loadMoreBtn.classList.add("is-hidden")}function j(){e.notFoundDiv.classList.add("not-found--visible"),N()}function T(){e.notFoundDiv.classList.remove("not-found--visible")}let r=1,i,l=0,w,x=e.formSearch.querySelector(".search-form__input");async function q(){try{const t=await k();D(["All",...t]),U()}catch{u({message:"Try again later!"})}}async function H(){try{E();const t=await L(r),{products:o}=t;m(o),e.productList.addEventListener("click",n=>{n.target.nodeName!=="UL"&&C(n)});const a=t.total;l=Math.ceil(a/d),f(r,l)}catch(t){u(t)}}async function h(){console.log(c.categoryName),r+=1;let t;try{i&&(t=await M(i,r)),c.categoryName==="All"||c.categoryName===""?t=await L(r):t=await v(c.categoryName,r),console.log(t);const{products:o}=t;m(o);const a=t.total;l=Math.ceil(a/d),f(r,l)}catch(o){u(o)}}function z(){let t;e.categoriesList.addEventListener("click",async o=>{if(r=1,o.target.nodeName==="BUTTON"){c.categoryName=o.target.textContent,console.log(c.categoryName);try{E(),c.categoryName==="All"||c.categoryName===""?t=await L(r):t=await v(c.categoryName,r),console.log(t);const{products:a}=t;console.log(a),console.log(r),Array.isArray(a)&&a.length===0&&e.notFoundDiv.classList.add("not-found--visible"),m(a),e.productList.addEventListener("click",p=>{p.target.nodeName!=="UL"&&C(p)});const n=t.total;l=Math.ceil(n/d),f(r,l)}catch(a){u(a)}}})}async function C(t){try{if(!t.target.closest(".products__item"))return;const o=t.target.closest(".products__item").dataset.id,a=await B(`${o}`);F(a),S()}catch(o){u(o)}}function Y(){e.formSearch.addEventListener("submit",async t=>{t.preventDefault(),i=t.target.searchValue.value.trim();try{if(!i)throw e.formSearch.reset(),new Error("Sorry, this name images is empty. Please try again!");i!==w&&(r=1,w=i),E();const o=await M(i,r),a=o.total;l=Math.ceil(a/d),a===0?j():(m(o.products),f(r,l))}catch(o){u(o)}})}function V(){e.clearBtn.addEventListener("click",t=>{t.preventDefault(),x.value="",i="",H()})}async function Z(t){try{const o=await Promise.all(t);console.log(o),m(o)}catch(o){u(o)}e.productList.addEventListener("click",o=>{o.target.nodeName!=="UL"&&C(o)})}export{H as a,Y as b,z as c,B as f,q as g,V as o,Z as s};
//# sourceMappingURL=handlers-CuxqnO0I.js.map
